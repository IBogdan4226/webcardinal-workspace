<style>
    .ta_introduction webc-link a {
        text-decoration: none;
    }

    .ta_introduction section {
        margin: 3rem auto;
        padding: 1rem 2rem;
        background: whitesmoke;
    }
</style>
<div id="test-container" class="ta_introduction">
    <main>
        <section>
            <article>
                <h2>How does it work?</h2>

                <ol>
                    <li>
                        Initially, tests are moved from <code>/pages/automated-tests</code> to development root of the <a target="_blank" href="https://github.com/webcardinal/webcardinal-core">webcardinal-core</a>
                        component library, in <code>/src/test</code> directory.
                    </li>
                    <li>
                        Tests are run using the Stencil E2E mechanism, where <a href="https://jestjs.io" target="_blank">jest</a> and <a
                            href="https://pptr.dev/" target="_blank">puppeteer</a> are
                        installed (automatically by <a href="https://github.com/PrivateSky/octopus" target="_blank">octopus</a> task-runner).
                    </li>
                    <li>
                        After running all the tests, a report is generated and saved.
                    </li>
                </ol>

                <p>In a nutshell, a <strong>Chromium</strong> instance is used for E2E testing.</p>
            </article>
        </section>

        <section>
            <article>
                <h3>What is WebCardinal Testing Environment?</h3>
                <p>
                    A test environment is a WebCardinal application designed specifically for testing. It contains
                    <strong>pages</strong>, <strong>templates</strong>, <strong>controllers</strong>, etc and it should supply auxiliary
                    <strong>methods</strong> and <strong>helpers</strong>.<br>
                </p>

                <p>More precise, all the test listed below are rolled in an application, called <strong>Automated Environment</strong> (<a
                        href="https://github.com/webcardinal/webcardinal-app-tester/tree/master/pages/automated-tests/tests/environments/1" target="_blank">source code</a>).</p>
            </article>
        </section>

        <section>
            <article>
                <h3>Testing Environment of WebCardinal</h3>

                <webc-link tag="webcardinal/main-testing-environment">
                    <button class="button-outline">Automated Environment ›</button>
                </webc-link>
                <webc-link tag="webcardinal/main-tests-results">
                    <button style="margin-left: 1rem">View results ✔</button>
                </webc-link>

                <ul style="padding-top: 1em">
                    <em>NOTES:</em>
                    <li>
                        <strong>Automated Environment</strong> will uses the <strong>same webcardinal bundle</strong> (<em>bundle-all</em>) as
                        current workspace (<em>webcardinal-workspace</em>).
                    </li>
                    <li>
                        When tests are running Stencil creates a <strong>temporarily distribution</strong> (using <em>Stencil
                        Dev Server ⚡</em>) .
                    </li>
                </ul>
            </article>
        </section>

        <section>
            <article>
                <h3>How to run current tests</h3>
                <span>From the root of this application run the following command:</span>
                <psk-code language="bash">
                    npm test
                </psk-code>
            </article>

            <br>

            <article>
                <h6>Useful flags for <code>test</code> command from <code>octopus.json</code></h6>
                <psk-code language="bash">
                    --devtools # open Chromium Dev Tools
                    --screenshot # for Screenshot visual diff testing
                </psk-code>
            </article>
        </section>

        <section>
            <article>
                <h3>References</h3>
                <ul>
                    <li>
                        <a href="https://stenciljs.com/docs/end-to-end-testing" target="_blank">StencilJS End-to-end Testing (https://stenciljs.com/docs/end-to-end-testing)</a>
                    </li>
                    <li>
                        <a href="https://stenciljs.com/docs/unit-testing" target="_blank">Stencil Unit Testing  (https://stenciljs.com/docs/unit-testing)</a>
                    </li>
                </ul>
            </article>
        </section>
    </main>
</div>