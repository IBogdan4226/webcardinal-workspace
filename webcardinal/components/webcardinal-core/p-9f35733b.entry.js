import{r as t,c as i,h as a,H as s}from"./p-afa78421.js";import{U as e}from"./p-bc85da7f.js";import{H as o}from"./p-dc68eded.js";import{p as n}from"./p-f8a2682a.js";import"./p-e506992e.js";const r=class{constructor(a){t(this,a),this.getIdentityConfigEvent=i(this,"webcardinal:config:getIdentity",7)}async componentWillLoad(){try{const t=await n(this.getIdentityConfigEvent);this.avatar=t.avatar,this.email=t.email,this.name=t.name}catch(t){console.error(t)}}render(){return a(s,Object.assign({},{class:{"has-avatar":!!this.avatar}}),this.avatar?a("img",{src:this.avatar,alt:this.name,part:"avatar"}):null,a("a",{href:"/",class:"name",part:"name"},this.name),a("a",{href:"mailto:"+this.email,class:"email",part:"email"},this.email))}};r.style={default:":host{display:grid;row-gap:var(--row-gap);place-content:center;justify-content:stretch}:host a{color:var(--color);text-decoration:none}:host>img{border-radius:var(--avatar-radius)}:host>.name{font-size:var(--name-font-size)}:host>.email{font-size:var(--email-font-size)}:host(.has-avatar){grid-template-columns:var(--avatar-width) 1fr;column-gap:var(--column-gap)}:host(.has-avatar)>img{width:100%;grid-column:1/2;grid-row:1/3;align-self:center}:host(.has-avatar)>.email,:host(.has-avatar)>.name{grid-column:2/3}:host(.has-avatar)>.name{align-self:end}"};const{join:h}=e,c=class{constructor(i){t(this,i),this.menuElement=null,this.url=null,this.basePath="",this.item={path:"",children:null},this.level=0,this.name=""}async activate(){if(["vertical","horizontal","mobile"].includes(this.mode)&&this.host.getAttribute("url")===window.location.pathname){let t=this.host;for(t.setAttribute("active","");"webc-app-menu"!==t.tagName.toLowerCase();)t.classList.contains("dropdown")&&t.setAttribute("active",""),t=t.parentElement;"mobile"===this.mode&&(t.removeAttribute("visible"),t.removeAttribute("active"))}}async deactivate(){this.menuElement.querySelectorAll("webc-app-menu-item").forEach((t=>{t.removeAttribute("active"),"horizontal"===this.mode&&"number"==typeof t.level&&0===t.level&&t.firstElementChild.removeAttribute("active")}))}async handleDropdownClick(t){if(t.preventDefault(),t.stopImmediatePropagation(),"vertical"===this.mode){const i=t.currentTarget.parentElement;return await this.deactivate(),void i.toggleAttribute("active")}if("horizontal"!==this.mode){if("mobile"===this.mode){const i=t.currentTarget.parentElement;return await this.deactivate(),void i.toggleAttribute("active")}}else{const i=t.currentTarget.parentElement,a=i.parentElement;"number"==typeof a.level&&0!==a.level&&i.toggleAttribute("active")}}async componentWillLoad(){if(this.url||(this.url=h(this.item.path).pathname),""===this.url&&(this.url="/"),this.item.children){this.children=[];const t={basePath:this.basePath,menuElement:this.menuElement,mode:this.mode,level:this.level+1};this.item.children.forEach((i=>{t.name=i.name,t.item={path:h("",this.item.path,i.path).pathname},i.children&&(t.item.children=i.children),this.children.push(a("webc-app-menu-item",Object.assign({},t)))}))}}async componentDidLoad(){await this.activate()}render(){return this.children?a("div",{class:"dropdown"},a("div",{class:"item",onClick:this.handleDropdownClick.bind(this)},this.name),a("div",{class:"items"},this.children)):a(s,{url:this.url},a("stencil-route-link",{class:"item",url:this.url},this.name))}};!function(t,i,a,s){var e,o=arguments.length,n=o<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,i,a,s);else for(var r=t.length-1;r>=0;r--)(e=t[r])&&(n=(o<3?e(n):o>3?e(i,a,n):e(i,a))||n);o>3&&n&&Object.defineProperty(i,a,n)}([o()],c.prototype,"host",void 0);export{r as webc_app_identity,c as webc_app_menu_item}